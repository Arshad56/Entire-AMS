<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <enableFeeds>false</enableFeeds>
    <fields>
        <fullName>AccountId</fullName>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ActivationDate</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>ApprovalStatus</fullName>
        <trackHistory>false</trackHistory>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>BillingAddress</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Checklist__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Checklist</label>
        <referenceTo>Checklist__c</referenceTo>
        <relationshipLabel>Service Contracts</relationshipLabel>
        <relationshipName>Service_Contracts</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ContactId</fullName>
        <lookupFilter>
            <active>true</active>
            <filterItems>
                <field>Contact.AccountId</field>
                <operation>equals</operation>
                <valueField>$Source.AccountId</valueField>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Create_Request__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Create Request</label>
        <trackHistory>false</trackHistory>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Description</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Discount</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>EndDate</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Frequency__c</fullName>
        <externalId>false</externalId>
        <label>Frequency</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Daily</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Weekly</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Fortnightly</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Monthly</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Bimonthly</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Quarterly</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Semiannually</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Annually</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>GrandTotal</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>LineItemCount</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Name</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>OwnerId</fullName>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ParentServiceContractId</fullName>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Request_Start_Date__c</fullName>
        <externalId>false</externalId>
        <label>Request Start Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>RootServiceContractId</fullName>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Service_Type__c</fullName>
        <externalId>false</externalId>
        <label>Service Type</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Picklist</type>
        <valueSet>
            <controllingField>Type__c</controllingField>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Cleaning</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Security</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
            <valueSettings>
                <controllingFieldValue>Service</controllingFieldValue>
                <valueName>Cleaning</valueName>
            </valueSettings>
            <valueSettings>
                <controllingFieldValue>Service</controllingFieldValue>
                <valueName>Security</valueName>
            </valueSettings>
        </valueSet>
    </fields>
    <fields>
        <fullName>ShippingAddress</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>ShippingHandling</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>SpecialTerms</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>StartDate</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Status</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>StatusIndicator</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Subtotal</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Tax</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Term</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>TotalPrice</fullName>
        <trackHistory>false</trackHistory>
    </fields>
    <fields>
        <fullName>Type__c</fullName>
        <externalId>false</externalId>
        <label>Type</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Service</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Equipment</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <listViews>
        <fullName>All_ServiceContracts</fullName>
        <columns>CONTRACT.NAME</columns>
        <columns>CONTRACT.APPROVALSTATUS</columns>
        <columns>CONTRACT.STARTDATE</columns>
        <columns>CONTRACT.ENDDATE</columns>
        <columns>CONTRACT.STATUS</columns>
        <filterScope>Everything</filterScope>
        <label>All Service Contracts</label>
    </listViews>
    <searchLayouts>
        <customTabListAdditionalFields>CONTRACT.NAME</customTabListAdditionalFields>
        <customTabListAdditionalFields>CONTRACT.STARTDATE</customTabListAdditionalFields>
        <customTabListAdditionalFields>CONTRACT.ENDDATE</customTabListAdditionalFields>
        <customTabListAdditionalFields>CONTRACT.APPROVALSTATUS</customTabListAdditionalFields>
        <customTabListAdditionalFields>CONTRACT.STATUS</customTabListAdditionalFields>
        <customTabListAdditionalFields>CONTRACT.STATUSINDICATOR</customTabListAdditionalFields>
        <searchResultsAdditionalFields>CONTRACT.NAME</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>CONTRACT.STARTDATE</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>CONTRACT.ENDDATE</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>CONTRACT.APPROVALSTATUS</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>CONTRACT.STATUS</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>CONTRACT.STATUSINDICATOR</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>Private</sharingModel>
    <validationRules>
        <fullName>Check_Request_Start_Date</fullName>
        <active>true</active>
        <errorConditionFormula>Request_Start_Date__c &lt; StartDate</errorConditionFormula>
        <errorMessage>Request Start Date must be after Service Contract Start Date</errorMessage>
    </validationRules>
    <webLinks>
        <fullName>Create_Request</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Create Request</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/18.0/apex.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/20.0/connection.js&quot;)}

var sclist = sforce.connection.query(&quot;SELECT id from Equipment_Service_Contract__c where Service_Contract__c=&apos;{!ServiceContract.Id}&apos;&quot;);
var scRecords = sclist.getArray(&quot;records&quot;);

if({!ServiceContract.Create_Request__c == true}){ 
	alert(&quot;Request(s) is created.&quot;); 
}else if(scRecords.length == 0){
alert(&quot;Please create equipment to tag with service contract.&quot;); 
}else{
	var newRecords = []; 
	var ob=new sforce.SObject(&quot;ServiceContract&quot;); 
	ob.Id=&quot;{!ServiceContract.Id}&quot;; 
	ob.Create_Request__c = true; 
	newRecords.push(ob); 
	var result=sforce.connection.update(newRecords); 
	if(!result[0].getBoolean(&quot;success&quot;)){ 
		alert(result[0].errors.message); 
	}else{
		location.reload(); 
	}
}</url>
    </webLinks>
</CustomObject>
